add_definitions(-DQT_SHAREDPOINTER_TRACK_POINTERS)

IF(MSVC)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /MP")
ELSE()
    add_compile_options(-fPIC)
ENDIF()


SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_ROOT_DIR}/bin)
SET(LIBRARY_OUTPUT_PATH ${PROJECT_ROOT_DIR}/bin)
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_ROOT_DIR}/bin)

IF(BUILD_QT6)
    SET(QT_VER Qt6)
ELSE()
    SET(QT_VER Qt5)
    macro(qt_standard_project_setup)        
        set(CMAKE_AUTOMOC ON)
        set(CMAKE_AUTOUIC ON)
        set(CMAKE_AUTORCC ON)
    endmacro()
ENDIF()

SET_PROPERTY(GLOBAL PROPERTY USE_FOLDERS ON)
set(CMAKE_DEBUG_POSTFIX "_debug")

macro(QCAD_OUTPUT_DIR name)
IF(WIN32)
    SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${LIBRARY_OUTPUT_PATH}/Debug/${name})
    SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${LIBRARY_OUTPUT_PATH}/Release/${name})
    SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY_MINSIZEREL ${LIBRARY_OUTPUT_PATH}/MinSizeRel/${name})
    SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELWITHDEBINFO ${LIBRARY_OUTPUT_PATH}/RelWithDebInfo/${name})
ELSE() 
    SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG ${LIBRARY_OUTPUT_PATH}/${name})
    SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE ${LIBRARY_OUTPUT_PATH}/${name})
    SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY_MINSIZEREL ${LIBRARY_OUTPUT_PATH}/${name})
    SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELWITHDEBINFO ${LIBRARY_OUTPUT_PATH}/${name})
ENDIF()
endmacro()